<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> Project 1 whatever</title>
        <!-- bootstrap CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css">
        <!-- jquery JS -->
        
    </head>
    <body>
        
        <!-- form from bootstrap to help with -->
            <!-- zip code (required) -->
            <!-- restaurant type (optional) -->
            <!-- restaurant name (optional) -->
            <!-- carryout/delivery? (checkboxes) -->


        <!-- card for the weather api -->
            <!-- current temperature -->
            <!-- current rain/snow? -->
            <!-- windy? -->

        <!-- container for the map -->
        <div id="map"></div>

    </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCxsfk5uokgV_Uu1XpzgMO3OAGaElsVqOw&callback=initMap" type="text/javascript"></script>
    <script type="text/javascript">
        // step 1: Zomato API 
        cities = "Cleveland, Ohio"
        id = 1033
        // currency = "$"
        lat = 41.4993 //will be generated via function through google maps API
        lon = -81.6944 //will be generated via function through google maps API
        radius = 24140.2 //about 15 miles


        var restaurantName = "olivegarden"; //user input (no spaces!)
        var cuisine = "italian" //user inputs here
        // var price_range =  four//user
        // var average_cost_for_x =  price_range + "" //something to scale the pricing
        // var zipcode = 44136 
        
        var queryURL = "https://developers.zomato.com/api/v2.1/search?q=" + restaurantName +
         "&count=15&lat=" + lat +"&lon=" + lon +"&radius=24140.2&cuisine=" + cuisine + "api_key"
        
        

        $.ajax({
            url: queryURL,
            method: "GET",
            headers: {'user-key': "19a26be38c8982385cd3ead26085c343"}
        }).then(function(response){
            console.log(response);
        });
        // step 2: Google Maps API
        let map;

            function initMap() {
                map = new google.maps.Map(document.getElementById("map"), {
                    center: { lat: -34.397, lng: 150.644 },
                    zoom: 8,
            });
            }
        // step 3: OpenWeather API
         // This is our API key
        var APIKey = "6cfffd42b643f9cd29fe45722d8c7849";

            // Here we are building the URL we need to query the database
            var queryURL = "https://api.openweathermap.org/data/2.5/weather?" +
            "q=Bujumbura,Burundi&appid=" + APIKey;

            // Here we run our AJAX call to the OpenWeatherMap API
            $.ajax({
            url: queryURL,
            method: "GET"
            })
            // We store all of the retrieved data inside of an object called "response"
            .then(function(response) {

                // Log the queryURL
                console.log(queryURL);

                // Log the resulting object
                console.log(response);

                // Transfer content to HTML
                $(".city").html("<h1>" + response.name + " Weather Details</h1>");
                $(".wind").text("Wind Speed: " + response.wind.speed);
                $(".humidity").text("Humidity: " + response.main.humidity);
                
                // Convert the temp to fahrenheit
                var tempF = (response.main.temp - 273.15) * 1.80 + 32;

                // add temp content to html
                $(".temp").text("Temperature (K) " + response.main.temp);
                $(".tempF").text("Temperature (F) " + tempF.toFixed(2));

                // Log the data in the console as well
                console.log("Wind Speed: " + response.wind.speed);
                console.log("Humidity: " + response.main.humidity);
                console.log("Temperature (F): " + tempF);
            });
    </script>
    
</html>